# -*- mode: sh; -*-
# Source global definitions
if [ -f /etc/zshrc ]; then
  . /etc/zshrc
fi

# Personal
alias vrc='vim ~/.vimrc'
alias st='git status'
alias br='git branch'
alias gri='git rebase -i'
alias gdn='git diff HEAD~ --name-only'
alias gaa='git add . && git commit --amend -C HEAD'
alias hgaa='HGEDITOR=/usr/bin/true hg commit --amend'

alias egdn='emacs `gdn | grep -v __init__`'
alias ls='ls --color=auto'
alias grep='grep --colour=auto'
alias gl='git lg'
alias git='noglob git'

# Emacs
alias emacs='env TERM=xterm-16color emacs -nw'
alias e='emacsclient'
alias gfr='git fetch && git rebase origin/master'
alias gft='git fetch && git rebase trunk'
alias tma='tmux attach -d -t'

export LC_ALL=en_US.utf-8
export LANG="$LC_ALL"

alias xelatexmk='latexmk -pvc -pdf -xelatex'

# Colourised cat
alias ccat='pygmentize -g'

# Lua
alias luarep='rlwrap th'

function geometric-mean {
    awk '{b  = $NF; C += log(b); D++; } END { if (D > 0) print exp(C/D); }'
}

function arithmetic-mean {
    awk '{ sum += $NF; n++ } END { if (n > 0) print sum / n; }'
}


function keynote-colors () {
    pygmentize -f rtf -O 'fontface=Monaco,style=tango' $1 | sed 's;\\f0;\\f0\\fs60;g' | tr -d '\n' | sed 's;\\par}$;};' | pbcopy
}

# Set tmux pwd
if [ -n "$TMUX" ]; then
    tmux setenv TMUXPWD_$(tmux display -p "#D" | tr -d %) "$PWD"
fi
